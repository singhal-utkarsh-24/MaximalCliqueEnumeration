<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo 2 - Tomita Maximal Cliques</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Algorithm 2: Tomita Maximal Cliques</h1>

        <div class="note">
            <p><strong>NOTE:</strong> Click on each image to get the number of maximal cliques of each size.
        </div>
        <!-- Histograms Section -->
        <div class="histograms">
            <div class="histogram">
                <a href = "DakshWikiBig.png" target="_blank">
                <img src="dakshWiki.png" alt="Wiki Histogram">
                </a>
                <table>
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                    </tr>
                    <tr>
                        <td>Largest Clique Size</td>
                        <td>17</td>
                    </tr>
                    <tr>
                        <td>Total number of maximal cliques</td>
                        <td>459002</td>
                    </tr>
                    <tr>
                        <td>Execution time with Parallelization</td>
                        <td>0.515 seconds</td>
                    </tr>
                    <tr>
                        <td>Execution time without Parallelization</td>
                        <td>10.504 seconds</td>
                    </tr>
                </table>
            </br>
            </div>

            <div class="histogram">
                <a href = "DakshEnronBig.png" target="_blank">
                <img src="DakshEnron.png" alt="Enron Histogram">
            </a>
                <table>
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                    </tr>
                    <tr>
                        <td>Largest Clique Size</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>Total number of maximal cliques</td>
                        <td>226859</td>
                    </tr>
                    <tr>
                        <td>Execution time with Parallelization</td>
                        <td>1.666 seconds</td>
                    </tr>
                    <tr>
                        <td>Execution time without Parallelization</td>
                        <td>53.263 seconds</td>
                    </tr>
                </table>
            </div>

            <div class="histogram">
                <a href = "KhushSkitterBig.png" target="_blank">
                <img src="Khush Skitter.png" alt="Skitter Histogram"> </a>
                <table>
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                    </tr>
                    <tr>
                        <td>Largest Clique Size</td>
                        <td>67</td>
                    </tr>
                    <tr>
                        <td>Total number of maximal cliques</td>
                        <td>37322355</td>
                    </tr>
                    <tr>
                        <td>Execution time with Parallelization</td>
                        <td>4674.17 seconds</td>
                    </tr>
                    <tr>
                        <td>Execution time without Parallelization</td>
                        <td>More than 12 Hours</td>
                    </tr>
                </table>
            </div>
            
        </div>

        <!-- Source Code Section -->
        <div class="source-code">
            <h2>Source Code</h2>
<pre><code>#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;vector&gt;
#include &lt;unordered_set&gt;
#include &lt;algorithm&gt;
#include &lt;chrono&gt;
#include &lt;map&gt;
#include &lt;omp.h&gt; // OpenMP for parallelization

using namespace std;

class CliqueFinder {
public:
    int n;
    vector&lt;unordered_set&lt;int&gt;&gt; adjList;
    vector&lt;int&gt; vertexOrder;
    map&lt;int, int&gt; cliqueSizeCount;
    int totalCliques = 0;
    int maxCliqueSize = 0;
    vector&lt;bool&gt; inClique; // Track membership for efficient lookup

    CliqueFinder(int n) : n(n), inClique(n, false) {
        adjList.resize(n);
    }

    void addEdge(int u, int v) {
        adjList[u].insert(v);
        adjList[v].insert(u);
    }

    void sortVerticesByDegree() {
        vector&lt;pair&lt;int, int&gt;&gt; degreeList;
        for (int i = 0; i &lt; n; ++i) {
            degreeList.emplace_back(adjList[i].size(), i);
        }
        sort(degreeList.begin(), degreeList.end(), [](const pair&lt;int, int&gt; &amp;a, const pair&lt;int, int&gt; &amp;b) {
            return a.first &gt; b.first;
        });

        vertexOrder.resize(n);
        for (int i = 0; i &lt; n; i++) {
            vertexOrder[i] = degreeList[i].second;
        }
    }

    bool isMaximalClique(const vector&lt;int&gt; &amp;C) {
        for (int v = 0; v &lt; n; ++v) {
            if (!inClique[v]) {
                bool isAdjacentToAll = true;
                for (int u : C) {
                    if (adjList[u].find(v) == adjList[u].end()) {
                        isAdjacentToAll = false;
                        break;
                    }
                }
                if (isAdjacentToAll) return false;
            }
        }
        return true;
    }

    void findCliques() {
        sortVerticesByDegree();
        vector&lt;int&gt; C;
        #pragma omp parallel
        {
            #pragma omp single
            {
                update(0, C);
            }
        }
    }

    void update(int i, vector&lt;int&gt; &amp;C) {
        if (i == n) {
            if (!C.empty() &amp;&amp; isMaximalClique(C)) {
                #pragma omp critical
                {
                    cliqueSizeCount[C.size()]++;
                    totalCliques++;
                    maxCliqueSize = max(maxCliqueSize, (int)C.size());
                }
            }
            return;
        }

        int v = vertexOrder[i];
        bool isClique = true;

        for (int u : C) {
            if (adjList[u].find(v) == adjList[u].end()) {
                isClique = false;
                break;
            }
        }

        if (isClique) {
            C.push_back(v);
            inClique[v] = true;

            #pragma omp task shared(C)
            update(i + 1, C);

            inClique[v] = false;
            C.pop_back();
        }

        #pragma omp task shared(C)
        update(i + 1, C);
    }

    void printResults() {
        cout &lt;&lt; "Number of maximal cliques of each size:" &lt;&lt; endl;
        for (auto &amp;[size, count] : cliqueSizeCount) {
            cout &lt;&lt; "Size " &lt;&lt; size &lt;&lt; ": " &lt;&lt; count &lt;&lt; endl;
        }
        cout &lt;&lt; "Total number of maximal cliques: " &lt;&lt; totalCliques &lt;&lt; endl;
        cout &lt;&lt; "Size of the largest maximal clique: " &lt;&lt; maxCliqueSize &lt;&lt; endl;
    }
};

int main() {
    ifstream inputFile("test4_processed.txt");
    if (!inputFile.is_open()) {
        cerr &lt;&lt; "Error: Unable to open input file!" &lt;&lt; endl;
        return 1;
    }

    int n, m;
    inputFile &gt;&gt; n &gt;&gt; m;

    CliqueFinder finder(n);

    int u, v;
    for (int i = 0; i &lt; m; i++) {
        inputFile &gt;&gt; u &gt;&gt; v;
        finder.addEdge(u, v);
    }

    inputFile.close();

    auto start = chrono::high_resolution_clock::now();
    finder.findCliques();
    auto end = chrono::high_resolution_clock::now();
    chrono::duration&lt;double&gt; elapsed = end - start;

    finder.printResults();
    cout &lt;&lt; "Running time: " &lt;&lt; elapsed.count() &lt;&lt; " seconds" &lt;&lt; endl;

    return 0;
}</code></pre>
        </div>

        <div class="histogram-section">
            <h2>Execution Times</h2>
            <img src="KhushHist.png" alt="Execution Times Histogram">
        </div>

        <div class="back-button">
            <a href="index.html" class="button">Back to Home</a>
        </div>

    </div>
</body>
</html>